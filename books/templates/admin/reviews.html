{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Review Insights</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #101014, #23263a);
      min-height: 100vh;
      padding: 2rem;
      color: #f0f0f0;
    }

    .glass {
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(14px);
      border-radius: 1.25rem;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      padding: 1rem;
      text-align: left;
    }

    thead {
      background-color: rgba(255, 255, 255, 0.05);
      border-bottom: 2px solid rgba(255, 255, 255, 0.08);
    }

    tr:hover {
      background-color: rgba(255, 255, 255, 0.03);
    }

    .badge {
      padding: 0.25rem 0.6rem;
      border-radius: 0.5rem;
      font-size: 0.75rem;
      font-weight: 600;
      display: inline-block;
    }

    .badge-spam {
      background-color: rgba(239, 68, 68, 0.15);
      color: #f87171;
    }

    .badge-genuine {
      background-color: rgba(34, 197, 94, 0.15);
      color: #4ade80;
    }

    .badge-positive {
      color: #34d399;
    }

    .badge-negative {
      color: #f87171;
    }

    .badge-neutral {
      color: #facc15;
    }
  </style>
</head>
<body>

<div class="max-w-6xl mx-auto glass p-8 mt-10">
  <h1 class="text-3xl font-bold text-center mb-6 text-white">🧠 Review Moderation</h1>
  
  <div class="overflow-x-auto">
    <table class="text-sm">
      
      <tbody>
        <h1 class="text-2xl font-bold text-center mb-6">📚 Community Reviews</h1>

{% for review in reviews %}
  <div class="bg-white rounded-xl shadow p-6 mb-6">
    <h2 class="text-xl font-semibold text-indigo-700">{{ review.book.title }}</h2>
    <p class="mt-2 text-gray-800">{{ review.review }}</p>
    <div class="mt-2 text-sm text-gray-500">
      Reviewed by <span class="font-medium">{{ review.visitor.name }}</span> on {{ review.created_at|date:"M d, Y" }}
    </div>
    <div class="mt-1 text-xs text-gray-400">
      {% if review.is_spam %}
        <span class="text-red-500">🚫 Spam</span>
      {% else %}
        <span class="text-green-500">✅ Genuine</span>
      {% endif %}
      • Sentiment: 
      {% if review.sentiment == 'Positive' %}
        🙂 Positive
      {% elif review.sentiment == 'Negative' %}
        🙁 Negative
      {% else %}
        😐 Neutral
      {% endif %}
    </div>
  </div>
{% empty %}
  <p class="text-gray-400 text-center">No reviews posted yet. Be the first!</p>
{% endfor %}

      </tbody>
    </table>
  </div>

  <div class="flex justify-between items-center mb-6">
  <div class="flex gap-3">
    <a href="?filter=" class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600">All</a>
    <a href="?filter=spam" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500">Only Spam</a>
    <a href="?filter=negative" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-500">Only Negative</a>
  </div>
</div>


  <div class="text-center mt-8">
    <a href="{% url 'admin_dashboard' %}" class="inline-block px-6 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold">← Back to Dashboard</a>
  </div>
</div>

<!-- Footer -->
<footer class="bg-gray-800 text-white py-8 mt-10">
  <div class="max-w-5xl mx-auto px-4 text-center">
    <p class="text-sm text-gray-400">Built with 🛠️ by Smart Library Team</p>
  </div>
</footer>

</body>
</html>
